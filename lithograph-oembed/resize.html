<!DOCTYPE HTML>
<body>
<div id = "oembed-container"></div>
<script src = "https://embed.tonic.work"></script>

<script>

create("");

function create(source)
{
    const element = document.getElementById("oembed-container");
    const isIFrame = true;//window.parent !== window;console.log("what?...");
    const onResize = isIFrame && function onResize(_, { height })
    {console.log("hello...");
        const context = "iframe.resize";
        const data = { height, context, src: href };

        window.parent.postMessage(JSON.stringify(data), "*");
    }
console.log(onResize);
    RunKit.createNotebook({ element, source, onLoad:()=>console.log("hey"), onResize });
}

function flattenedSource({ content })
{
    return content.cells.map(({ content: { type, text } }) =>
        type === "source" ? text :
        type === "rich-text" ? `/* \n${text}\n*/` :
        "").join("\n");
}


</script>
</body>
